<div class="m-3">
  <div class="row">
    <div class="">
      <div ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-pills">
        <ng-container ngbNavItem="board">
          <button ngbNavLink>BOARD</button>
          <ng-template ngbNavContent>
            <div class="row ">
              <div class="col-6 AddDetails">
                <label>BOARD</label>
                <input id="typeahead-format" class="form-control mt-3 mb-3" type="text" name="board"
                  (change)="onSelectBoard($event)" [ngbTypeahead]="search" [resultFormatter]="formatter" />
                <button class="btn btn-primary form-control mt-3" (click)="addBoard()">ADD</button>
              </div>
              <div class="col-6">
                <h3 class="">Already added BOARD</h3>
                <ol class="fs-5">
                  @for(board of boardList; track $index){
                  <li>
                    {{board}}
                  </li>
                  }
                </ol>
              </div>
            </div>

          </ng-template>
        </ng-container>

        <ng-container ngbNavItem="section">
          <button ngbNavLink>SECTION</button>
          <ng-template ngbNavContent>
            <div class="row ">
              <div class="col-6 AddDetails">
                <div class="form-group">
                  <label>BOARD</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectBoard($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(board of boardList; track $index){
                    <option value="{{board}}">{{board}}</option>
                    }
                  </select>
                </div>
                <label>SECTION</label>
                <input id="typeahead-format" type="text" class="form-control mt-3 mb-3" name="section"
                  (change)="onSelectSection($event)" [ngbTypeahead]="search" [resultFormatter]="formatter" />
                <button class="btn btn-primary form-control mt-3" (click)="addSection()">ADD</button>
              </div>
              <div class="col-6">
                <h3 class="">SECTION under: {{board}}</h3>
                <ol class="fs-5">
                  @for(item of dataSet; track $index){
                  @if(item.board===board){
                  <li>
                    {{item.section}}
                  </li>
                  }
                  }
                </ol>
              </div>
            </div>
          </ng-template>
        </ng-container>

        <ng-container ngbNavItem="mps">
          <button ngbNavLink>MPS</button>
          <ng-template ngbNavContent>
            <div class="row ">
              <div class="col-6 AddDetails">
                <div class="form-group">
                  <label>BOARD</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectBoard($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(board of boardList; track $index){
                    <option value="{{board}}">{{board}}</option>
                    }
                  </select>
                </div>
                <div class="form-group">
                  <label>SECTION</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectSection($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(section of sectionList; track $index){
                    <option value="{{section}}">{{section}}</option>
                    }
                  </select>
                </div>
                <label>MPS</label>
                <input id="typeahead-format" class="form-control mt-3 mb-3" type="number" name="mps" [(ngModel)]="mps"
                  [ngbTypeahead]="search" [resultFormatter]="formatter" />
                <button class="btn btn-primary form-control mt-3" (click)="addMPS()">ADD</button>
              </div>
              <div class="col-6">
                <h3 class="">MPS â€“ Maximum Permission Speed under {{board}} : {{section}}</h3>
                <ol class="fs-5">
                  @for(item of dataSet; track $index){
                  @if(item.section===section && item.board===board){
                  <li>
                    {{item.mps}} km/hr
                  </li>
                  }
                  }
                </ol>
              </div>
            </div>
          </ng-template>
        </ng-container>

        <ng-container ngbNavItem="station">
          <button ngbNavLink>STATION</button>
          <ng-template ngbNavContent>
            <div class="row ">
              <div class="col-6 AddDetails">
                <div class="form-group">
                  <label>BOARD</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectBoard($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(board of boardList; track $index){
                    <option value="{{board}}">{{board}}</option>
                    }
                  </select>
                </div>
                <div class="form-group">
                  <label>SECTION</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectSection($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(section of sectionList; track $index){
                    <option value="{{section}}">{{section}}</option>
                    }
                  </select>
                </div>
                <label>STATION</label>
                <input id="typeahead-format" class="form-control mt-3 mb-3" type="text" name="station"
                  [(ngModel)]="station" [ngbTypeahead]="search" [resultFormatter]="formatter" />
                <button class="btn btn-primary form-control mt-3" (click)="addStation()">ADD</button>
              </div>
              <div class="col-6">
                <h3 class="">STATION under Board: {{board}} | {{section}}</h3>
                <ol class="fs-5">
                  @for(item of dataSet; track $index){
                  @if(item.section === section && item.board===board){
                  <li>
                    {{item.stations}}
                  </li>
                  }
                  }
                </ol>
              </div>
            </div>
          </ng-template>
        </ng-container>

        <ng-container ngbNavItem="slot">
          <button ngbNavLink>SLOT</button>
          <ng-template ngbNavContent>
            <div class="row ">
              <div class="col-6 avlslot">
                <div class="form-group">
                  <label>BOARD</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectBoard($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(board of boardList; track $index){
                    <option value="{{board}}">{{board}}</option>
                    }
                  </select>
                </div>
                <div class="form-group">
                  <label>SECTION</label>
                  <select class="form-select mt-3 mb-3" (change)="onSelectSection($event)">
                    <option value="" selected disabled>Select Board</option>
                    @for(section of sectionList; track $index){
                    <option value="{{section}}">{{section}}</option>
                    }
                  </select>
                </div>
                <div class="">
                  <div class="">DIRECTION</div>
                  @for (item of directions; track $index) {
                  <input type="checkbox" class="btn-check" id='{{$index}}' [(ngModel)]="directions[$index]['checked']">
                  <label class="btn btn-outline-primary ms-3" for={{$index}}>{{item['direction'] | uppercase}}</label>
                  }
                </div>
                <label>AVAILABLE SLOT</label>
                <br>
                <div class="avl-slot">
                  <hr>
                  <div class="">
                    @for (direction of directions; track $index) {
                    @if(direction['checked']){
                    <div class="">
                      <h3 class="">{{direction['direction'] | uppercase}}</h3>
                      <div class="">Repeat on</div>
                      <input type="checkbox" class="btn-check" id="Sunday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[0]">
                      <label class="btn btn-outline-primary ms-3" for="Sunday{{selectedAvl}}{{$index}}">S</label>
                      <input type="checkbox" class="btn-check" id="Monday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[1]">
                      <label class="btn btn-outline-primary ms-3" for="Monday{{selectedAvl}}{{$index}}">M</label>
                      <input type="checkbox" class="btn-check" id="Tuesday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[2]">
                      <label class="btn btn-outline-primary ms-3" for="Tuesday{{selectedAvl}}{{$index}}">T</label>
                      <input type="checkbox" class="btn-check" id="Wednesday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[3]">
                      <label class="btn btn-outline-primary ms-3" for="Wednesday{{selectedAvl}}{{$index}}">W</label>
                      <input type="checkbox" class="btn-check" id="Thursday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[4]">
                      <label class="btn btn-outline-primary ms-3" for="Thursday{{selectedAvl}}{{$index}}">T</label>
                      <input type="checkbox" class="btn-check" id="Friday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[5]">
                      <label class="btn btn-outline-primary ms-3" for="Friday{{selectedAvl}}{{$index}}">F</label>
                      <input type="checkbox" class="btn-check" id="Saturday{{selectedAvl}}{{$index}}"
                        [(ngModel)]="direction.days[6]">
                      <label class="btn btn-outline-primary ms-3" for="Saturday{{selectedAvl}}{{$index}}">S</label>
                      <div class="mt-3">Timing</div>
                      <div class="row">
                        <div class="col-6">
                          <label>Start:</label>
                          <ngb-timepicker [(ngModel)]="direction['start']" />
                        </div>
                        <div class="col-6">
                          <label>end:</label>
                          <ngb-timepicker [(ngModel)]="direction['end']" />
                        </div>
                      </div>
                      <hr>
                    </div>
                    }
                    }
                  </div>
                </div>
                <button type="button" class="btn btn-primary form-control" (click)="onSubmitAvl()">ADD</button>
              </div>
              <div class="col-6">
                <h3 class="">AVAILABLE SLOT under {{board}}: {{section}}</h3>
                <ol class="fs-5">
                  @for(item of dataSet; track $index){
                  @if(item.section === section && item.board===board){
                  <li>
                    <div class="">
                      DIRECTIONS:{{item.directions}}
                    </div>
                    @for(ele of item.directions; track $index){
                    <div class="">
                      DAYS:{{item.slots[ele].days}}
                    </div>
                    <div class="">
                      TIME:{{item.slots[ele].time}}
                    </div>
                    }
                  </li>
                  }
                  }
                </ol>
              </div>
            </div>
          </ng-template>
        </ng-container>

        <ng-container ngbNavItem="machine">
          <button ngbNavLink>MACHINE</button>
          <ng-template ngbNavContent>
            <div class="row">
              <div class="col-6 AddDetails">
                <label>MACHINE</label>
                <input id="typeahead-format" class="form-control mt-3 mb-3" type="text" name="machine"
                  [(ngModel)]="machine" [ngbTypeahead]="search" [resultFormatter]="formatter" />
                <button class="btn btn-primary form-control mt-3" (click)="addMachine()">ADD</button>
              </div>
              <div class="col-6">
                <h3 class="">MACHINES</h3>
                <ol class="fs-5">
                  @for(item of machineList; track $index){
                  <li>
                    {{item.machine}}
                  </li>
                  }
                </ol>
              </div>
            </div>
          </ng-template>
        </ng-container>
      </div>
      <div [ngbNavOutlet]="nav" class="ms-4"></div>
    </div>
  </div>
</div>